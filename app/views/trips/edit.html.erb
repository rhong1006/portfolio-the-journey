<link href = "https://code.jquery.com/ui/1.10.4/themes/ui-lightness/jquery-ui.css" rel = "stylesheet">
<script src = "https://code.jquery.com/jquery-1.10.2.js"></script>
<script src = "https://code.jquery.com/ui/1.10.4/jquery-ui.js"></script>

<div class="container">
  <span class="title">Edit Your Journey</span>
  <!-- BootStrap Modal Button: Edit Current Trip -->
  <div class="float-right" data-toggle="modal" data-target='#TripInfoModal'>
    <%= fa_icon "paper-plane 2x"  %>
    <span>Trip Info</span>
  </div>
  <%= link_to 'Show', @trip %>
</div>


<div class="row" style="margin-bottom: 70px;">
  <div id="routes" class="col-2" data-tripstartdate="<%= @trip.start_date %>"><h3>Your Routes</h3>
    <ol id="sortable">
    </ol>
  </div>
  <div class="col-9" style="margin-left:70px;">
    <div class="latlng"></div>
    <div id="floating-panel">
      <input id="address" type="textbox" value="Sydney, NSW">
      <input id="submit" type="button" value="Geocode">
    </div>
    <div id="map" data-tripid="<%= @trip.id %>" data-clickable="true"></div>
  </div>
</div>


<!-- BootStrap Modal: Trip Info -->
<div class="modal fade" id="TripInfoModal" tabindex="-1" role="dialog" aria-labelledby="tripModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="tripModalLabel">Trip Info</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <div class="trip-info">
          <table style="width:100%">
             <tr>
                 <th>Title:</th>
                 <td><%= @trip.title %></td>
             </tr>
             <tr>
                 <th>Note:</th>
                 <td><%= @trip.note %></td>
             </tr>
             <tr>
                 <th>Start Date:</th>
                 <td><%= @trip.start_date %></td>
             </tr>
             <tr>
                 <th>End Date:</th>
                 <td><%= @trip.end_date %></td>
             </tr>
             <tr>
                 <th>Tag Lists:</th>
                 <td><%= @trip.tag_list %></td>
             </tr>
         </table>
          <div class="float-right" data-toggle="modal" data-target='#editTripModal'>
            <%= fa_icon "edit 2x"  %>
            <span>Edit Trip Info</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>


<!-- BootStrap Modal: Edit Current Trip -->
<div class="modal fade" id="editTripModal" tabindex="-1" role="dialog" aria-labelledby="tripModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="tripModalLabel">Edit Trip</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body" style="font-family:arial">
        <%= render 'form', trip: @trip %>
      </div>
    </div>
  </div>
</div>



<div id="addForm" style="display:none">
  <%= form_for @route, url: trip_routes_path(@trip)  do |f| %>
    <div class="form-group">
      <%= f.label :start_date %>
      <%= f.text_field :start_date, data:{ provide:'datepicker' } %>
    </div>
    <%= f.submit 'Sign In!', class:"btn btn-primary"%>
  <% end %>
</div>


<%= javascript_include_tag 'features/dom' %>
<%= javascript_include_tag 'features/map' %>
<script src="https://maps.googleapis.com/maps/api/js?key=<%= ENV['GOOGLE_MAP_API_SECRET'] %>&callback=initMap"
async defer></script>
